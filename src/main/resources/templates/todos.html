<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" content="text/html">
    <title>My Todos</title>
</head>
<style>
    table {
        font-family: arial, sans-serif;
        border-collapse: collapse;
    }

    td, th {
        border: 1px solid #dddddd;
        text-align: left;
        padding: 8px;
    }

    tr:nth-child(even) {
        background-color: #dddddd;
    }
</style>
<body>
<div class="container my-5">
    <div class="row">
    <div class="col-md-6">
        <h2 th:if="*{taches.isEmpty()}"> Aucune tâche ! Commencez par <a href="/newTodo">ajouter une tâche.</a></h2>
        <div th:if="*{!taches.isEmpty()}">
            <h2>Mes tâches à faire</h2>
            <br>
            <a href="/newTodo">Nouvelle tâche</a>
            <table>
                <tr>
                    <th>Titre</th>
                    <th>Description</th>
                    <th>Date</th>
                    <th colspan="3">Actions</th>
                </tr>
                <tr th:each="tache: ${taches}">
                    <td th:text="${tache.titre}"></td>
                    <td th:text="${tache.texte}"></td>
                    <!-- Pour formatter correctement la date, on peut le faire à la main ou
                    ajouter la dépendance Thymeleaf associée qui ajoute aussi une tonne de vulnérabilités. -->
                    <td th:text="${tache.getDate().getDayOfMonth() + '/' + tache.getDate().getMonthValue() + '/' + tache.getDate().getYear() + ' ' + tache.getDate().getHour() + ':' + tache.getDate().getMinute() + ':' + tache.getDate().getSecond()}"></td>
                    <td>
                        <form th:method="get" th:actions="${'/todo/' + tache.id}">
                            <button class="w3-button w3-black" type="submit">Voir</button>
                        </form>
                    </td>
                    <td>
                        <form th:method="get" th:actions="${'/todo/edit/' + tache.id}">
                            <button class="w3-button w3-black" type="submit">Editer</button>
                        </form>
                    </td>
                    <td>
                        <form th:method="get" th:actions="${'/todo/delete/' + tache.id}">
                            <button class="w3-button w3-black" type="submit">Supprimer</button>
                        </form>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    </div>
</div>
</body>
</html>