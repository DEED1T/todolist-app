<!DOCTYPE html>
<html lang="fr" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>My Todos</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
</head>
<body>
<div class="container">


        <h2 th:if="*{taches.isEmpty()}" class="text-center mt-4"> Aucune tâche ! Commencez par <a href="/newTodo">ajouter une tâche.</a></h2>

        <div th:if="*{!taches.isEmpty()}">
            <h2 class="text-center mt-4">Mes tâches à faire</h2>
            <br>
            <a href="/newTodo">Nouvelle tâche</a>
            <table class="table table-hover">
                <thead>
                    <tr>
                        <th scope="col">Titre</th>
                        <th scope="col">Description</th>
                        <th scope="col">Date</th>
                        <th scope="col" colspan="3">Actions</th>
                    </tr>
                </thead>
                <tr th:each="tache: ${taches}">
                    <td th:text="${tache.titre}"></td>
                    <td th:text="${tache.texte}"></td>
                    <!-- Pour formatter correctement la date, on peut le faire à la main ou
                    ajouter la dépendance Thymeleaf associée qui ajoute aussi une tonne de vulnérabilités. -->
                    <td th:text="${tache.getDate().getDayOfMonth() + '/' + tache.getDate().getMonthValue() + '/' + tache.getDate().getYear() + ' ' + tache.getDate().getHour() + ':' + tache.getDate().getMinute() + ':' + tache.getDate().getSecond()}"></td>
                    <td>
                        <a th:href="@{/todo/{id}(id=${tache.id})}" class="btn btn-primary">Voir</a>
                    </td>
                    <td>
                        <a th:href="@{/todo/edit/{id}(id=${tache.id})}" class="btn btn-secondary">Editer</a>
                    </td>
                    <td>
                        <a th:href="@{/todo/delete/{id}(id=${tache.id})}" class="btn btn-danger">Supprimer</a>
                    </td>
                </tr>
            </table>
        </div>
</div>
</body>
</html>